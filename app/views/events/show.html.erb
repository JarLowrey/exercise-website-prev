<!-- Google Maps Must be loaded -->
<% content_for :head do %>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMh8-5D3mJSXspmJrhSTtt0ToGiA-JLBc&libraries=places"></script>
<% end %>

<script>
markerPos = new google.maps.LatLng(<%= @event.address.latitude %>,<%= @event.address.longitude %>);
</script>

<p id="notice"><%= notice %></p>

<h1> <% @event.participants.count %> people going to this event </h1>

<% console %>

<% if user_signed_in? 
    if @participant != nil %>
        <%= link_to "Remove myself from event", remove_participant_from_event_path, method: :put, remote: true %>
    <% else %>
        <%= link_to "Sign Up For Event", add_participant_to_event_path, method: :put, remote: true %>
    <%  end
end %>

<%= @event.attributes %>
<br/>
<br/>
<%= Event.reflect_on_all_associations.map{|x| x.class_name}.compact%>
<br/>
<br/>
<p>address - <%= @event.address.attributes %></p>

<div id="map"></div>

<%= link_to 'Edit', edit_event_path(@event) %> |
<%= link_to 'Back', events_path %>
